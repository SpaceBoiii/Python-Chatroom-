( (app := __import__('flask').Flask(__name__)), (socketio := __import__('flask_socketio').SocketIO(app, cors_allowed_origins="*")), (app_index := app.route('/')(lambda : __import__('flask').render_template_string('''<div class='wrapper' style='display: flex; flex-direction: column; width: calc(100% - 16px); height: 90%; align-items: center; justify-content: center; padding: 8px;'><textarea class='messages' style='width: 100%; flex-grow: 1; border: 1px solid black; overflow-y: scroll; resize: none; padding: 10px;' readonly></textarea><div class='bottom-wrapper' style='display: flex; width: 100%;'><input type='text' class='name' placeholder='Enter your name' /><input type='text' class='message' style='flex-grow: 1;' placeholder='Enter your message here' /><button class='send' style='padding: 4px 16px;'>send</button></div></div><script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.5/socket.io.js" integrity="sha512-2rUSTSAeOO02jF6eBqENNqPs1EohenJ5j+1dgDPdXSLz9nOlrr8DJk4zW/lDy8rjhGCSonW3Gx812XJQIKZKJQ==" crossorigin="anonymous"></script><script src='https://code.jquery.com/jquery.min.js'></script><script>var socket = io();$(".message").on('keyup', function (e) {if (e.key === 'Enter' || e.keyCode === 13) {sendMsg();};});$('.send').click(() => {sendMsg();});function sendMsg() {var name = $('.name').val();var message = $('.message').val();if (name.length == 0 || name.length > 24 || message.length == 0 || message.length > 256) {alert('Name must be between 1 and 24 characters. Message must be between 1 and 256 characters.');}else {socket.emit('message', {'name': name, 'message':message});$('.message').val('');$('.message').focus();};};socket.on('response', (json) => {$('.messages').text($('.messages').text() +  `\n<${json.name}> ${json.message}`);$('.messages').scrollTop($('.messages')[0].scrollHeight);});</script>''', html='<h1>test</h1>'))), (message := socketio.on('message')( lambda json : ( socketio.emit('response', {'name': ''.join(filter(lambda x: x in set(__import__('string').printable), json['name'])), 'message': ''.join(filter(lambda x: x in set(__import__('string').printable), json['message']))}) ) if ( (0 < len(json['name']) <= 24) and (0 < len(json['message']) <= 256) ) else (False) )), app.run(host='0.0.0.0', port=8080) if __name__ == '__main__' else False )